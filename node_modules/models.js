/**
 * Created by mohammad on 7/5/15.
 */
var db = require('./db');

var User = db.Model.extend({
	tableName: 'users',
	documents: function() {
		return this.hasMany(Document);
	},
	posts: function() {
		return this.hasMany(Post);
	}
});

var Document = db.Model.extend({
	tableName: 'documents',
	user: function() {
		return this.belongsTo(User);
	},
	users: function() {
		return this.belongsToMany(User).through(Post);
	},
	posts: function() {
		return this.hasMany(Post);
	}
});

var Post = db.Model.extend({
	tableName: 'posts',
	user: function() {
		return this.belongsTo(User);
	},
	document: function() {
		return this.belongsTo(Document);
	}
});


module.exports = {
	User: User,
	Document: Document,
	Post: Post
}

/*new Document({
 user_id: 2,
 title: 'نیازمندی های وب سرویس',
 created: Math.round(Date.now() / 1000)
 }).save().then(function (a, b) {
 console.log(a);
 console.log(b);
 });*/

new User({
	id: 1
}).fetch().then(function(doc) {
	console.log(doc.toJSON());
});
console.log('AAAAAAAAAAAAAAAAAAAAAAAA')